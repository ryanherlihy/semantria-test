const gh = require('./')
const util = require('util')
const template = require('url-template')

const auth = {
  token: '89ef6672bcb6e26b583d8e58ea899c726c0153f7'
  , user: 'ralphtheninja'
}

//gh.getById(auth, 'level', 'leveldown', '1363866', function (err, release) {
  //console.log(release)
//})

//gh.getLatest(auth, 'level', 'leveldown', function (err, release) {
  //console.log(release)
//})

//gh.getByTag(auth, 'level', 'leveldown', 'v1.2.2', function (err, release) {
  //console.log(release)
//})

if (true) {
  //gh.list(auth, 'ralphtheninja', 'leveldown', function (err, list) {
    //console.log(list)
  //})
  //gh.getLatest(auth, 'ralphtheninja', 'leveldown', function (err, list) {
    //console.log(list)
  //})
  //var uri = 'https://uploads.github.com/repos/ralphtheninja/leveldown/releases/1446134/assets{?name}'
  //var assetUrl = template.parse(uri)
  //console.log(assetUrl.expand({ name: 'foo.tar.gz' }))
  //gh.getByTag(auth, 'ralphtheninja', 'leveldown', '1.2.3-test', function (err, release) {
    //console.log(release)
  //})
  //return gh.getById(auth, 'ralphtheninja', 'leveldown', '1446081', function (err, list) {
    //console.log(list)
  //})
  var files = [
    __dirname + '/README.md',
    __dirname + '/leveldown-v1.3.0-node-v44-linux-x64.tar.gz'
  ]
  //var options = {
    //woot: {
      //'woohoo': 'dude'
    //}
  //}
  //gh.uploadAsset(auth, 'ralphtheninja', 'leveldown', 'latest', files, function (err, result) {
  //gh.uploadAsset(auth, 'ralphtheninja', 'leveldown', 'tags/v1.2.2', files, function (err, result) {
  gh.uploadAssets(auth, 'ralphtheninja', 'leveldown', '1446081', files, function (err, result) {
    console.log('err', err)
    console.log('result', result)
  })
}
else {
  var data = {
    tag_name: '1.2.3-test',
    name: 'Release name for 1.2.3-test',
    body: 'Body text of release goes here'
  }
  gh.create(auth, 'ralphtheninja', 'leveldown', data, function (err, release) {
    console.log(err, release)
  })
}
